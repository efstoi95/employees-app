<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Form</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Roboto, sans-serif;
            font-size: 22px;
            background-color: #f5f5f5;
        }

         .container {
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
            padding: 20px;

        }

         .split-view {
            display: flex;
            gap: 15px;
            width: 1365px;
        }

           .info-container {
            flex: 70%;
        }

        .edit-container {
            flex: 30%;
            display: none;
            height: auto;
            border: 1px solid #dee2e6;
        }

        h2 {
            text-align: center;
            color: #333;
            padding: 20px;
        }

        .form-container {
            width: 60%;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .form-control {
            height: calc(2.25rem + 10px); /* Increase the height */
            font-size: 1.25rem; /* Increase the font size */
        }

        .form-control-lg {
            height: calc(2.875rem + 10px); /* Even larger height for large inputs */
            font-size: 1.5rem; /* Larger font size for large inputs */
        }

        .btn-custom {
            background-color: #fecb01;
            color: black;
            font-size: 1.25rem;
            height: calc(2.875rem + 10px); /* Match height with form-control-lg */
        }

        .btn-custom:hover {
            color: white;
            background-color: #7e6501;
        }

        /* Skills label */
        label[for="skills"] {
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
        }

        /* Skills list */
        #skills {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            background-color: #fff;
            width: 100%;
            font-size: 25px;
            color: #333;
            margin-bottom: 15px;
        }

        #skills li {
            list-style-type: none;
            margin-bottom: 5px;
        }

        #skills li::before {
            content: "â€¢ ";
            font-weight: bold;
            color: #333; /* Match the label color */
        }

        .text-danger {
            color: #dc3545;
        }

        .is-invalid {
            border-color: #dc3545;
        }

        button-edit {
            background-color: #fecb01;
            color: black;
            font-size: 1.25rem;
            height: calc(2.875rem + 10px);
            width: 100%;
            text-align: right;
        }

        .button {
            display: inline-block;
            padding: 8px 16px;
            background-color: #fecb01;
            color: black;
            text-align: center;
            text-decoration: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            margin-bottom: 10px;
            margin-right: 10px;
            width: 150px;
        }

        .button:hover {
            background-color: #7e6501;
            color: #ffffff;
        }

        .button-right {
            text-align: right;
            margin-right: 10%;
            margin-bottom: 3%;
        }

        .button-left {
            text-align: left;
            margin-left: 20%;
        }

        .project {
            border: 1px solid #ccc; /* Add border to each project */
            padding: 15px; /* Add padding to each project */
            margin-bottom: 20px; /* Add margin bottom to each project */
            border-radius: 4px; /* Add border radius to match the container */
            background-color: #f9f9f9; /* Slight background color for project section */
        }

        .project ul {
            padding-left: 20px; /* Add padding to nested list */
        }

        .project strong {
            display: block; /* Make project name a block element */
            margin-bottom: 5px; /* Add some margin below the project name */
        }

        .numbered-list {
            counter-reset: list-counter;
        }

        .numbered-list > li {
            list-style: none;
            position: relative;

        }

        .btn{
    padding: 10px 60px;
    background: #fff;
    border: none;
    outline: none;
    cursor: pointer;
    font-size:22px;
    font-weight: 500;
    border-radius: 30px;
  }






   .popup {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4);
        }

  .popup-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 35%;
            height: 12%;
            text-align: center;
            border-radius: 10px;
        }


   .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

    </style>
</head>
<body>
<div class="container" style="max-width: 1600px">
    <h2>Employee Information</h2>
    <div class="popup" id="popup">
        <h2>File list Updated!</h2>
        <p> Your file deleted successfully.! </p>
        <button type="submit"
                th:data-employee-id="${employeeId}" onclick="closePopup(this.getAttribute('data-employee-id'))" method="post">OK</button>
    </div>
    <div class="button-right">
        <a th:href="@{/web/successUserLogin/{id}(id=${employeeId})}" class="button">Back to Menu</a>
        <a th:href="@{/login?logout}" class="button">Logout</a>
    </div>
    <div class="split-view">
        <div class="info-container">
            <div class="button-left">
                <a th:href="@{/web/editInfoEmployee/{id}(id=${employeeId})}" class="button files-link">Edit</a>
            </div>
            <div class="form-container">
                <form th:action="@{/web/editedInfoEmployee}" th:object="${employee}" method="post">
                    <input type="hidden" th:field="*{id}">
                    <input type="hidden" th:field="*{fullName}">
                    <input type="hidden" th:field="*{email}">
                    <input type="hidden" th:field="*{department.name}">
                    <input type="hidden" th:field="*{role}">

                    <div class="form-group">
                        <label for="fullName">Full Name:</label>
                        <input type="text" class="form-control form-control-lg" id="fullName" th:field="*{fullName}" required minlength="4" pattern="[a-zA-Z\s]+" title="Full Name should contain only letters and spaces" disabled>
                    </div>

                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control form-control-lg" id="email" th:field="*{email}" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" disabled>
                    </div>

                    <!-- Display selected department -->
                    <div class="form-group">
                        <label for="department">Department:</label>
                        <input type="text" class="form-control form-control-lg" id="department" th:value="${employee.department != null ? employee.department.name : 'N/A'}" disabled>
                    </div>

                    <!-- Display selected role -->
                    <div class="form-group">
                        <label for="role">Role:</label>
                        <input type="text" class="form-control form-control-lg" id="role" th:value="${employee.role}" disabled>
                    </div>

                    <div class="form-group">
                        <label for="skills">Skills:</label>
                        <ul id="skills">
                            <li th:each="skill : ${employee.skills}" th:text="${skill.name}"></li>
                        </ul>
                    </div>

                    <!-- Display projects and tasks -->
                    <div class="form-group">
                        <label for="projects">Projects:</label>
                        <div id="projects">
                            <ul class="numbered-list">
                                <li th:each="project, projectStat : ${employee.projects}" class="project">
                                    <strong th:text="${projectStat.index + 1} + '. ' + ${project.name}"></strong>
                                    <ul class="numbered-list" style="margin-left: 10px;">
                                        <li th:each="task, taskStat : ${project.tasks}" th:text=" ${taskStat.index + 1} + '. ' + ${task.name}" th:unless="${#lists.isEmpty(project.tasks)}"></li>
                                        <li th:if="${#lists.isEmpty(project.tasks)}">None</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>

                </form>
            </div>
        </div>
        <div class="files-container" id="filesContainer">

        </div>
    </div>
</div>
<div th:if="${employeeUpdated}" class="popup" th:style="'display:block;'">
    <div class="popup-content">
        <span class="close" onclick="this.parentElement.parentElement.style.display='none'">&times;</span>
        <p>Employee updated successfully!</p>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script>

   document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('.files-link').forEach(link => {
           link.addEventListener('click', function(event) {
               event.preventDefault();
               fetch(link.href)
                   .then(response => response.text())
                   .then(html => {
                       document.getElementById('filesContainer').innerHTML = html;
                       document.getElementById('filesContainer').style.display = 'block';
                       document.getElementById('editContainer').style.display = 'none';
                   })
                   .catch(error => console.warn('Error fetching files content:', error));
           });
       });
        // Simulating form submission and showing popup
        document.getElementById('myForm').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent actual form submission

            // Simulated form submission logic (replace with your actual form submission logic)
            setTimeout(function () {
                openPopup(); // Show the popup after a simulated delay
            }, 1000); // Adjust delay as needed
        });
});

</script>

</body>
</html>
